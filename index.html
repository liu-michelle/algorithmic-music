<script src="https://cdn.jsdelivr.net/gh/netizenorg/netnet-standard-library/build/nn.min.js"></script>
<script src="https://unpkg.com/tone"></script>
<script>
  /*global nn, Tone */
  const synth = new Tone.Synth().toDestination()
  const scale = nn.createScale('C4', 'major')
  const chord = nn.createChord(scale, 'triad')
  let keydown = false
  let step = 0
  
  function startPlaying() {
    if (!keydown) 
    {
    const next = scale[step]
    synth.triggerAttack(ran)
    keydown = true
    step++
      if (step >= scale.length) step = 0
    }
   
  }
  
  function stopPlaying() {
    synth.triggerRelease()
    keydown = false
  }
  
  nn.on('keydown', startPlaying)
  nn.on('keyup', stopPlaying)
</script>